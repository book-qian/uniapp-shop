{"version":3,"file":"uni-number-box.js","sources":["../../../../../../../../uni_modules/uni-number-box/components/uni-number-box/uni-number-box.vue","../../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/L1VzZXJzL3lhbmd5b25ncWlhbi9jb2RlL3VuaS1zaG9wL3VuaV9tb2R1bGVzL3VuaS1udW1iZXItYm94L2NvbXBvbmVudHMvdW5pLW51bWJlci1ib3gvdW5pLW51bWJlci1ib3gudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"uni-numbox\">\r\n\t\t<view @click=\"_calcValue('minus')\" class=\"uni-numbox__minus uni-numbox-btns\" :style=\"{background}\">\r\n\t\t\t<text class=\"uni-numbox--text\" :class=\"{ 'uni-numbox--disabled': inputValue <= min || disabled }\" :style=\"{color}\">-</text>\r\n\t\t</view>\r\n\t\t<input :disabled=\"disabled\" @focus=\"_onFocus\" @blur=\"_onBlur\" class=\"uni-numbox__value\" type=\"number\"\r\n\t\t\tv-model=\"inputValue\" :style=\"{background, color}\" />\r\n\t\t<view @click=\"_calcValue('plus')\" class=\"uni-numbox__plus uni-numbox-btns\" :style=\"{background}\">\r\n\t\t\t<text class=\"uni-numbox--text\" :class=\"{ 'uni-numbox--disabled': inputValue >= max || disabled }\" :style=\"{color}\">+</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\t/**\r\n\t * NumberBox 数字输入框\r\n\t * @description 带加减按钮的数字输入框\r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?id=31\r\n\t * @property {Number} value 输入框当前值\r\n\t * @property {Number} min 最小值\r\n\t * @property {Number} max 最大值\r\n\t * @property {Number} step 每次点击改变的间隔大小\r\n\t * @property {String} background 背景色\r\n\t * @property {String} color 字体颜色（前景色）\r\n\t * @property {Boolean} disabled = [true|false] 是否为禁用状态\r\n\t * @event {Function} change 输入框值改变时触发的事件，参数为输入框当前的 value\r\n\t * @event {Function} focus 输入框聚焦时触发的事件，参数为 event 对象\r\n\t * @event {Function} blur 输入框失焦时触发的事件，参数为 event 对象\r\n\t */\r\n\r\n\texport default {\r\n\t\tname: \"UniNumberBox\",\r\n\t\temits: ['change', 'input', 'update:modelValue', 'blur', 'focus'],\r\n\t\tprops: {\r\n\t\t\tvalue: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 1\r\n\t\t\t},\r\n\t\t\tmodelValue: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 1\r\n\t\t\t},\r\n\t\t\tmin: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tmax: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 100\r\n\t\t\t},\r\n\t\t\tstep: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 1\r\n\t\t\t},\r\n\t\t\tbackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#f5f5f5'\r\n\t\t\t},\r\n\t\t\tcolor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#333'\r\n\t\t\t},\r\n\t\t\tdisabled: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tinputValue: 0\r\n\t\t\t};\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tvalue(val) {\r\n\t\t\t\tthis.inputValue = +val;\r\n\t\t\t},\r\n\t\t\tmodelValue(val) {\r\n\t\t\t\tthis.inputValue = +val;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif (this.value === 1) {\r\n\t\t\t\tthis.inputValue = +this.modelValue;\r\n\t\t\t}\r\n\t\t\tif (this.modelValue === 1) {\r\n\t\t\t\tthis.inputValue = +this.value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t_calcValue(type) {\r\n\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst scale = this._getDecimalScale();\r\n\t\t\t\tlet value = this.inputValue * scale;\r\n\t\t\t\tlet step = this.step * scale;\r\n\t\t\t\tif (type === \"minus\") {\r\n\t\t\t\t\tvalue -= step;\r\n\t\t\t\t\tif (value < (this.min * scale)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (value > (this.max * scale)) {\r\n\t\t\t\t\t\tvalue = this.max * scale\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (type === \"plus\") {\r\n\t\t\t\t\tvalue += step;\r\n\t\t\t\t\tif (value > (this.max * scale)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (value < (this.min * scale)) {\r\n\t\t\t\t\t\tvalue = this.min * scale\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.inputValue = (value / scale).toFixed(String(scale).length - 1);\r\n\t\t\t\tthis.$emit(\"change\", +this.inputValue);\r\n\t\t\t\t// TODO vue2 兼容\r\n\t\t\t\tthis.$emit(\"input\", +this.inputValue);\r\n\t\t\t\t// TODO vue3 兼容\r\n\t\t\t\tthis.$emit(\"update:modelValue\", +this.inputValue);\r\n\t\t\t},\r\n\t\t\t_getDecimalScale() {\r\n\r\n\t\t\t\tlet scale = 1;\r\n\t\t\t\t// 浮点型\r\n\t\t\t\tif (~~this.step !== this.step) {\r\n\t\t\t\t\tscale = Math.pow(10, String(this.step).split(\".\")[1].length);\r\n\t\t\t\t}\r\n\t\t\t\treturn scale;\r\n\t\t\t},\r\n\t\t\t_onBlur(event) {\r\n\t\t\t\tthis.$emit('blur', event)\r\n\t\t\t\tlet value = event.detail.value;\r\n\t\t\t\tif (isNaN(value)) {\r\n\t\t\t\t\tthis.inputValue = this.min;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvalue = +value;\r\n\t\t\t\tif (value > this.max) {\r\n\t\t\t\t\tvalue = this.max;\r\n\t\t\t\t} else if (value < this.min) {\r\n\t\t\t\t\tvalue = this.min;\r\n\t\t\t\t}\r\n\t\t\t\tconst scale = this._getDecimalScale();\r\n\t\t\t\tthis.inputValue = value.toFixed(String(scale).length - 1);\r\n\t\t\t\tthis.$emit(\"change\", +this.inputValue);\r\n\t\t\t\tthis.$emit(\"input\", +this.inputValue);\r\n\t\t\t\tthis.$emit(\"update:modelValue\", +this.inputValue);\r\n\t\t\t},\r\n\t\t\t_onFocus(event) {\r\n\t\t\t\tthis.$emit('focus', event)\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n<style lang=\"scss\" >\r\n\t$box-height: 26px;\r\n\t$bg: #f5f5f5;\r\n\t$br: 2px;\r\n\t$color: #333;\r\n\r\n\t.uni-numbox {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tflex-direction: row;\r\n\t}\r\n\r\n\t.uni-numbox-btns {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 0 8px;\r\n\t\tbackground-color: $bg;\r\n\t\t/* #ifdef H5 */\r\n\t\tcursor: pointer;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t.uni-numbox__value {\r\n\t\tmargin: 0 2px;\r\n\t\tbackground-color: $bg;\r\n\t\twidth: 40px;\r\n\t\theight: $box-height;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 14px;\r\n\t\tborder-left-width: 0;\r\n\t\tborder-right-width: 0;\r\n\t\tcolor: $color;\r\n\t}\r\n\r\n\t.uni-numbox__minus {\r\n\t\tborder-top-left-radius: $br;\r\n\t\tborder-bottom-left-radius: $br;\r\n\t}\r\n\r\n\t.uni-numbox__plus {\r\n\t\tborder-top-right-radius: $br;\r\n\t\tborder-bottom-right-radius: $br;\r\n\t}\r\n\r\n\t.uni-numbox--text {\r\n\t\t// fix nvue\r\n\t\tline-height: 20px;\r\n\r\n\t\tfont-size: 20px;\r\n\t\tfont-weight: 300;\r\n\t\tcolor: $color;\r\n\t}\r\n\r\n\t.uni-numbox .uni-numbox--disabled {\r\n\t\tcolor: #c0c0c0 !important;\r\n\t\t/* #ifdef H5 */\r\n\t\tcursor: not-allowed;\r\n\t\t/* #endif */\r\n\t}\r\n</style>\r\n","import Component from '/Users/yangyongqian/code/uni-shop/uni_modules/uni-number-box/components/uni-number-box/uni-number-box.vue'\nwx.createComponent(Component)"],"names":["_sfc_main","name","emits","props","value","type","Number","String","default","modelValue","min","max","step","background","color","disabled","Boolean","data","inputValue","watch","val","this","created","methods","_calcValue","scale","_getDecimalScale","toFixed","length","$emit","Math","pow","split","_onBlur","event","detail","isNaN","_onFocus","wx","createComponent","Component"],"mappings":"6DA6BMA,EAAU,CACdC,KAAM,eACNC,MAAO,CAAC,SAAU,QAAS,oBAAqB,OAAQ,SACxDC,MAAO,CACNC,MAAO,CACNC,KAAM,CAACC,OAAQC,QACfC,QAAS,GAEVC,WAAY,CACXJ,KAAM,CAACC,OAAQC,QACfC,QAAS,GAEVE,IAAK,CACJL,KAAMC,OACNE,QAAS,GAEVG,IAAK,CACJN,KAAMC,OACNE,QAAS,KAEVI,KAAM,CACLP,KAAMC,OACNE,QAAS,GAEVK,WAAY,CACXR,KAAME,OACNC,QAAS,WAEVM,MAAO,CACNT,KAAME,OACNC,QAAS,QAEVO,SAAU,CACTV,KAAMW,QACNR,SAAS,IAGXS,KAAO,KACC,CACNC,WAAY,IAGdC,MAAO,CACNf,MAAMgB,GACLC,KAAKH,YAAcE,CACnB,EACDX,WAAWW,GACVC,KAAKH,YAAcE,CACpB,GAEDE,UACoB,IAAfD,KAAKjB,QACHiB,KAAAH,YAAcG,KAAKZ,YAED,IAApBY,KAAKZ,aACHY,KAAAH,YAAcG,KAAKjB,MAEzB,EACDmB,QAAS,CACRC,WAAWnB,GACV,GAAIgB,KAAKN,SACR,OAEK,MAAAU,EAAQJ,KAAKK,mBACf,IAAAtB,EAAQiB,KAAKH,WAAaO,EAC1Bb,EAAOS,KAAKT,KAAOa,EACvB,GAAa,UAATpB,EAAkB,CAEjB,GADKD,GAAAQ,EACLR,EAASiB,KAAKX,IAAMe,EACvB,OAEGrB,EAASiB,KAAKV,IAAMc,IACvBrB,EAAQiB,KAAKV,IAAMc,EAErB,CAEA,GAAa,SAATpB,EAAiB,CAEhB,GADKD,GAAAQ,EACLR,EAASiB,KAAKV,IAAMc,EACvB,OAEGrB,EAASiB,KAAKX,IAAMe,IACvBrB,EAAQiB,KAAKX,IAAMe,EAErB,CAEKJ,KAAAH,YAAcd,EAAQqB,GAAOE,QAAQpB,OAAOkB,GAAOG,OAAS,GACjEP,KAAKQ,MAAM,UAAWR,KAAKH,YAE3BG,KAAKQ,MAAM,SAAUR,KAAKH,YAE1BG,KAAKQ,MAAM,qBAAsBR,KAAKH,WACtC,EACDQ,mBAEC,IAAID,EAAQ,EAKL,QAHDJ,KAAKT,OAASS,KAAKT,OACxBa,EAAQK,KAAKC,IAAI,GAAIxB,OAAOc,KAAKT,MAAMoB,MAAM,KAAK,GAAGJ,SAE/CH,CACP,EACDQ,QAAQC,GACFb,KAAAQ,MAAM,OAAQK,GACf,IAAA9B,EAAQ8B,EAAMC,OAAO/B,MACrB,GAAAgC,MAAMhC,GAET,YADAiB,KAAKH,WAAaG,KAAKX,KAGxBN,GAASA,EACLA,EAAQiB,KAAKV,IAChBP,EAAQiB,KAAKV,IACHP,EAAQiB,KAAKX,MACvBN,EAAQiB,KAAKX,KAER,MAAAe,EAAQJ,KAAKK,mBACnBL,KAAKH,WAAad,EAAMuB,QAAQpB,OAAOkB,GAAOG,OAAS,GACvDP,KAAKQ,MAAM,UAAWR,KAAKH,YAC3BG,KAAKQ,MAAM,SAAUR,KAAKH,YAC1BG,KAAKQ,MAAM,qBAAsBR,KAAKH,WACtC,EACDmB,SAASH,GACHb,KAAAQ,MAAM,QAASK,EACrB,mcCvJHI,GAAGC,gBAAgBC"}