"use strict";const e=require("../../common/vendor.js"),a=require("../../utils/api.js");if(require("../../utils/axios.js"),!Array){e.resolveComponent("my-goods")()}Math;const o={__name:"goods_list",setup(o){const s=e.reactive({query:"",cid:"",pagenum:1,pagesize:10}),u=e.ref(!1),t=e.ref(0),i=e.ref([]),r=async o=>{u.value=!0;const{data:r}=await a.ajaxGet("/api/public/v1/goods/search",s);u.value=!1,o&&o();const{meta:n,message:d}=r;if(200!==n.status)return e.index.$showMessage();t.value=d.total,i.value=[...i.value,...d.goods]};return e.onReachBottom((()=>{if(s.pagenum*s.pagesize>=t.value)return e.index.$showMessage("数据加载完毕");u.value&&retuen,s.pagenum++,r()})),e.onPullDownRefresh((()=>{s.pagenum=1,t.value=0,i.value=[],r((()=>e.index.stopPullDownRefresh()))})),e.onLoad((({query:e="",cid:a=""})=>{s.query=e,s.cid=a,r()})),(a,o)=>({a:e.f(i.value,((a,o,s)=>({a:"274c8898-0-"+s,b:e.p({goods:a}),c:o,d:e.o((o=>(({goods_id:a})=>{e.index.navigateTo({url:"/subpkg/goods_detail/goods_detail?goods_id="+a})})(a)),o)})))})}};wx.createPage(o);
//# sourceMappingURL=goods_list.js.map
