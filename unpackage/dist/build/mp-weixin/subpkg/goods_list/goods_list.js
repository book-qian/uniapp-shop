"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("my-goods")()}Math;const a={__name:"goods_list",setup(a){const o=e.reactive({query:"",cid:"",pagenum:1,pagesize:10}),s=e.ref(!1),t=e.ref(0),n=e.ref([]),u=async a=>{s.value=!0;const{data:u}=await e.index.$http.get("/api/public/v1/goods/search",o);s.value=!1,a&&a();const{meta:r,message:d}=u;if(200!==r.status)return e.index.$showMessage();t.value=d.total,n.value=[...n.value,...d.goods]};return e.onReachBottom((()=>{if(o.pagenum*o.pagesize>=t.value)return e.index.$showMessage("数据加载完毕");s.value&&retuen,o.pagenum++,u()})),e.onPullDownRefresh((()=>{o.pagenum=1,t.value=0,n.value=[],u((()=>e.index.stopPullDownRefresh()))})),e.onLoad((({query:e="",cid:a=""})=>{o.query=e,o.cid=a,u()})),(a,o)=>({a:e.f(n.value,((a,o,s)=>({a:"274c8898-0-"+s,b:e.p({goods:a}),c:o,d:e.o((o=>(({goods_id:a})=>{e.index.navigateTo({url:"/subpkg/goods_detail/goods_detail?goods_id="+a})})(a)),o)})))})}};wx.createPage(a);
//# sourceMappingURL=goods_list.js.map
