"use strict";const o=require("../../common/vendor.js"),e=require("../../utils/api.js"),s=require("../../utils/config.js");if(require("../../utils/axios.js"),!Array){(o.resolveComponent("uni-icons")+o.resolveComponent("uni-goods-nav"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-goods-nav/components/uni-goods-nav/uni-goods-nav.js"))();const n={__name:"goods_detail",setup(n){const t=o.useStore(),i=o.reactive({goodsInfo:{},options:[{icon:"fire",text:"热度"},{icon:"wallet",text:"备忘录",info:0}],buttonGroup:[{text:"加入备忘录",backgroundColor:"#ff0000",color:"#fff"},{text:"作为模板",backgroundColor:"#ffa200",color:"#fff"}]}),a=o.computed((()=>t.getters["m_cart/total"]));o.watch((()=>a.value),(o=>{const e=i.options.find((o=>"购物车"===o.text));e&&(e.info=o)}),{immediate:!0});const d=e=>{"备忘录"===e.content.text&&o.index.switchTab({url:"/pages/cart/cart"})},r=o=>{if("加入备忘录"===o.content.text){const{goods_id:o,goods_name:e,goods_price:s,goods_small_logo:n}=i.goodsInfo;let a={goods_id:o,goods_name:e,goods_price:s,goods_small_logo:n,goods_count:1,goods_state:!0};t.commit("m_cart/addToCart",a)}},u=o.ref([]);o.onLoad((({goods_id:s})=>{(async s=>{const{data:n}=await e.ajaxGet("/api/public/v1/goods/detail",{goods_id:s}),{meta:t,message:a}=n;if(200!==t.status)return o.index.$showMessage();u.value=a.memorandum_detail,i.goodsInfo=a})(s)}));return(e,n)=>{var t,a,c,g,l;return o.e({a:null==(t=i.goodsInfo)?void 0:t.goods_name},(null==(a=i.goodsInfo)?void 0:a.goods_name)?{b:o.f(null==(c=i.goodsInfo)?void 0:c.pics,((e,n,t)=>({a:`${o.unref(s.BASE_URL)}${e.pics_big}`,b:n,c:o.o((e=>(e=>{let n=i.goodsInfo.pics.map((o=>({pics_big:`${s.BASE_URL}${o.pics_big}`}))).map((o=>o.pics_big));o.index.previewImage({urls:n,current:e})})(n)),n)}))),c:o.p({type:"fire",size:"17",color:"#f2ba4b"}),d:o.t(null==(g=i.goodsInfo)?void 0:g.goods_number),e:o.t(null==(l=i.goodsInfo)?void 0:l.goods_name),f:o.p({type:"star",size:"18",color:"gray"}),g:o.f(u.value,((e,n,t)=>({a:o.t(e.name),b:`${o.unref(s.BASE_URL)}${e.url}`,c:n}))),h:o.o(d),i:o.o(r),j:o.p({fill:!0,options:i.options,buttonGroup:i.buttonGroup})}:{})}}};wx.createPage(n);
//# sourceMappingURL=goods_detail.js.map
