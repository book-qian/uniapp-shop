"use strict";const o=require("../../common/vendor.js");if(!Array){(o.resolveComponent("uni-icons")+o.resolveComponent("uni-goods-nav"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-goods-nav/components/uni-goods-nav/uni-goods-nav.js"))();const n={__name:"goods_detail",setup(n){const s=o.useStore(),t=o.reactive({goodsInfo:{},options:[{icon:"shop",text:"店铺"},{icon:"cart",text:"购物车",info:0}],buttonGroup:[{text:"加入购物车",backgroundColor:"#ff0000",color:"#fff"},{text:"立即购买",backgroundColor:"#ffa200",color:"#fff"}]}),e=o.computed((()=>s.getters["m_cart/total"]));o.watch((()=>e.value),(o=>{const n=t.options.find((o=>"购物车"===o.text));n&&(n.info=o)}),{immediate:!0});const i=n=>{"购物车"===n.content.text&&o.index.switchTab({url:"/pages/cart/cart"})},d=o=>{if("加入购物车"===o.content.text){const{goods_id:o,goods_name:n,goods_price:e,goods_small_logo:i}=t.goodsInfo;let d={goods_id:o,goods_name:n,goods_price:e,goods_small_logo:i,goods_count:1,goods_state:!0};s.commit("m_cart/addToCart",d)}};o.onLoad((({goods_id:n})=>{(async n=>{const{data:s}=await o.index.$http.get("/api/public/v1/goods/detail",{goods_id:n}),{meta:e,message:i}=s;if(200!==e.status)return o.index.$showMessage();i.goods_introduce=i.goods_introduce.replace(/<img /g,'<img style="display:block;" ').replace(/webp,'jpg'/g),t.goodsInfo=i})(n)}));return(n,s)=>{var e,a,g,c,r,u;return o.e({a:null==(e=t.goodsInfo)?void 0:e.goods_name},(null==(a=t.goodsInfo)?void 0:a.goods_name)?{b:o.f(null==(g=t.goodsInfo)?void 0:g.pics,((n,s,e)=>({a:n.pics_big,b:s,c:o.o((n=>(n=>{o.index.previewImage({urls:t.goodsInfo.pics.map((o=>o.pics_big)),current:n})})(s)),s)}))),c:o.t(null==(c=t.goodsInfo)?void 0:c.goods_price),d:o.t(null==(r=t.goodsInfo)?void 0:r.goods_name),e:o.p({type:"star",size:"18",color:"gray"}),f:null==(u=t.goodsInfo)?void 0:u.goods_introduce,g:o.o(i),h:o.o(d),i:o.p({fill:!0,options:t.options,buttonGroup:t.buttonGroup})}:{})}}};wx.createPage(n);
//# sourceMappingURL=goods_detail.js.map
