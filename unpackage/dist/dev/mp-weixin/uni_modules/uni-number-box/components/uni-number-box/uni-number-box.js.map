{"version":3,"file":"uni-number-box.js","sources":["../../../../../../../../uni_modules/uni-number-box/components/uni-number-box/uni-number-box.vue","../../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/L1VzZXJzL3lhbmd5b25ncWlhbi9jb2RlL3VuaS1zaG9wL3VuaV9tb2R1bGVzL3VuaS1udW1iZXItYm94L2NvbXBvbmVudHMvdW5pLW51bWJlci1ib3gvdW5pLW51bWJlci1ib3gudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"uni-numbox\">\r\n\t\t<view @click=\"_calcValue('minus')\" class=\"uni-numbox__minus uni-numbox-btns\" :style=\"{background}\">\r\n\t\t\t<text class=\"uni-numbox--text\" :class=\"{ 'uni-numbox--disabled': inputValue <= min || disabled }\" :style=\"{color}\">-</text>\r\n\t\t</view>\r\n\t\t<input :disabled=\"disabled\" @focus=\"_onFocus\" @blur=\"_onBlur\" class=\"uni-numbox__value\" type=\"number\"\r\n\t\t\tv-model=\"inputValue\" :style=\"{background, color}\" />\r\n\t\t<view @click=\"_calcValue('plus')\" class=\"uni-numbox__plus uni-numbox-btns\" :style=\"{background}\">\r\n\t\t\t<text class=\"uni-numbox--text\" :class=\"{ 'uni-numbox--disabled': inputValue >= max || disabled }\" :style=\"{color}\">+</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\t/**\r\n\t * NumberBox 数字输入框\r\n\t * @description 带加减按钮的数字输入框\r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?id=31\r\n\t * @property {Number} value 输入框当前值\r\n\t * @property {Number} min 最小值\r\n\t * @property {Number} max 最大值\r\n\t * @property {Number} step 每次点击改变的间隔大小\r\n\t * @property {String} background 背景色\r\n\t * @property {String} color 字体颜色（前景色）\r\n\t * @property {Boolean} disabled = [true|false] 是否为禁用状态\r\n\t * @event {Function} change 输入框值改变时触发的事件，参数为输入框当前的 value\r\n\t * @event {Function} focus 输入框聚焦时触发的事件，参数为 event 对象\r\n\t * @event {Function} blur 输入框失焦时触发的事件，参数为 event 对象\r\n\t */\r\n\r\n\texport default {\r\n\t\tname: \"UniNumberBox\",\r\n\t\temits: ['change', 'input', 'update:modelValue', 'blur', 'focus'],\r\n\t\tprops: {\r\n\t\t\tvalue: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 1\r\n\t\t\t},\r\n\t\t\tmodelValue: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 1\r\n\t\t\t},\r\n\t\t\tmin: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tmax: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 100\r\n\t\t\t},\r\n\t\t\tstep: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 1\r\n\t\t\t},\r\n\t\t\tbackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#f5f5f5'\r\n\t\t\t},\r\n\t\t\tcolor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#333'\r\n\t\t\t},\r\n\t\t\tdisabled: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tinputValue: 0\r\n\t\t\t};\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tvalue(val) {\r\n\t\t\t\tthis.inputValue = +val;\r\n\t\t\t},\r\n\t\t\tmodelValue(val) {\r\n\t\t\t\tthis.inputValue = +val;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif (this.value === 1) {\r\n\t\t\t\tthis.inputValue = +this.modelValue;\r\n\t\t\t}\r\n\t\t\tif (this.modelValue === 1) {\r\n\t\t\t\tthis.inputValue = +this.value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t_calcValue(type) {\r\n\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst scale = this._getDecimalScale();\r\n\t\t\t\tlet value = this.inputValue * scale;\r\n\t\t\t\tlet step = this.step * scale;\r\n\t\t\t\tif (type === \"minus\") {\r\n\t\t\t\t\tvalue -= step;\r\n\t\t\t\t\tif (value < (this.min * scale)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (value > (this.max * scale)) {\r\n\t\t\t\t\t\tvalue = this.max * scale\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (type === \"plus\") {\r\n\t\t\t\t\tvalue += step;\r\n\t\t\t\t\tif (value > (this.max * scale)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (value < (this.min * scale)) {\r\n\t\t\t\t\t\tvalue = this.min * scale\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.inputValue = (value / scale).toFixed(String(scale).length - 1);\r\n\t\t\t\tthis.$emit(\"change\", +this.inputValue);\r\n\t\t\t\t// TODO vue2 兼容\r\n\t\t\t\tthis.$emit(\"input\", +this.inputValue);\r\n\t\t\t\t// TODO vue3 兼容\r\n\t\t\t\tthis.$emit(\"update:modelValue\", +this.inputValue);\r\n\t\t\t},\r\n\t\t\t_getDecimalScale() {\r\n\r\n\t\t\t\tlet scale = 1;\r\n\t\t\t\t// 浮点型\r\n\t\t\t\tif (~~this.step !== this.step) {\r\n\t\t\t\t\tscale = Math.pow(10, String(this.step).split(\".\")[1].length);\r\n\t\t\t\t}\r\n\t\t\t\treturn scale;\r\n\t\t\t},\r\n\t\t\t_onBlur(event) {\r\n\t\t\t\tthis.$emit('blur', event)\r\n\t\t\t\tlet value = event.detail.value;\r\n\t\t\t\tif (isNaN(value)) {\r\n\t\t\t\t\tthis.inputValue = this.min;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvalue = +value;\r\n\t\t\t\tif (value > this.max) {\r\n\t\t\t\t\tvalue = this.max;\r\n\t\t\t\t} else if (value < this.min) {\r\n\t\t\t\t\tvalue = this.min;\r\n\t\t\t\t}\r\n\t\t\t\tconst scale = this._getDecimalScale();\r\n\t\t\t\tthis.inputValue = value.toFixed(String(scale).length - 1);\r\n\t\t\t\tthis.$emit(\"change\", +this.inputValue);\r\n\t\t\t\tthis.$emit(\"input\", +this.inputValue);\r\n\t\t\t\tthis.$emit(\"update:modelValue\", +this.inputValue);\r\n\t\t\t},\r\n\t\t\t_onFocus(event) {\r\n\t\t\t\tthis.$emit('focus', event)\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n<style lang=\"scss\" >\r\n\t$box-height: 26px;\r\n\t$bg: #f5f5f5;\r\n\t$br: 2px;\r\n\t$color: #333;\r\n\r\n\t.uni-numbox {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tflex-direction: row;\r\n\t}\r\n\r\n\t.uni-numbox-btns {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 0 8px;\r\n\t\tbackground-color: $bg;\r\n\t\t/* #ifdef H5 */\r\n\t\tcursor: pointer;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t.uni-numbox__value {\r\n\t\tmargin: 0 2px;\r\n\t\tbackground-color: $bg;\r\n\t\twidth: 40px;\r\n\t\theight: $box-height;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 14px;\r\n\t\tborder-left-width: 0;\r\n\t\tborder-right-width: 0;\r\n\t\tcolor: $color;\r\n\t}\r\n\r\n\t.uni-numbox__minus {\r\n\t\tborder-top-left-radius: $br;\r\n\t\tborder-bottom-left-radius: $br;\r\n\t}\r\n\r\n\t.uni-numbox__plus {\r\n\t\tborder-top-right-radius: $br;\r\n\t\tborder-bottom-right-radius: $br;\r\n\t}\r\n\r\n\t.uni-numbox--text {\r\n\t\t// fix nvue\r\n\t\tline-height: 20px;\r\n\r\n\t\tfont-size: 20px;\r\n\t\tfont-weight: 300;\r\n\t\tcolor: $color;\r\n\t}\r\n\r\n\t.uni-numbox .uni-numbox--disabled {\r\n\t\tcolor: #c0c0c0 !important;\r\n\t\t/* #ifdef H5 */\r\n\t\tcursor: not-allowed;\r\n\t\t/* #endif */\r\n\t}\r\n</style>\r\n","import Component from '/Users/yangyongqian/code/uni-shop/uni_modules/uni-number-box/components/uni-number-box/uni-number-box.vue'\nwx.createComponent(Component)"],"names":[],"mappings":";;AA6BC,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,OAAO,CAAC,UAAU,SAAS,qBAAqB,QAAQ,OAAO;AAAA,EAC/D,OAAO;AAAA,IACN,OAAO;AAAA,MACN,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IACT;AAAA,IACD,YAAY;AAAA,MACX,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IACT;AAAA,IACD,KAAK;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,KAAK;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,MAAM;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,YAAY;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,OAAO;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,UAAU;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,YAAY;AAAA;EAEb;AAAA,EACD,OAAO;AAAA,IACN,MAAM,KAAK;AACV,WAAK,aAAa,CAAC;AAAA,IACnB;AAAA,IACD,WAAW,KAAK;AACf,WAAK,aAAa,CAAC;AAAA,IACpB;AAAA,EACA;AAAA,EACD,UAAU;AACT,QAAI,KAAK,UAAU,GAAG;AACrB,WAAK,aAAa,CAAC,KAAK;AAAA,IACzB;AACA,QAAI,KAAK,eAAe,GAAG;AAC1B,WAAK,aAAa,CAAC,KAAK;AAAA,IACzB;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,WAAW,MAAM;AAChB,UAAI,KAAK,UAAU;AAClB;AAAA,MACD;AACA,YAAM,QAAQ,KAAK;AACnB,UAAI,QAAQ,KAAK,aAAa;AAC9B,UAAI,OAAO,KAAK,OAAO;AACvB,UAAI,SAAS,SAAS;AACrB,iBAAS;AACT,YAAI,QAAS,KAAK,MAAM,OAAQ;AAC/B;AAAA,QACD;AACA,YAAI,QAAS,KAAK,MAAM,OAAQ;AAC/B,kBAAQ,KAAK,MAAM;AAAA,QACpB;AAAA,MACD;AAEA,UAAI,SAAS,QAAQ;AACpB,iBAAS;AACT,YAAI,QAAS,KAAK,MAAM,OAAQ;AAC/B;AAAA,QACD;AACA,YAAI,QAAS,KAAK,MAAM,OAAQ;AAC/B,kBAAQ,KAAK,MAAM;AAAA,QACpB;AAAA,MACD;AAEA,WAAK,cAAc,QAAQ,OAAO,QAAQ,OAAO,KAAK,EAAE,SAAS,CAAC;AAClE,WAAK,MAAM,UAAU,CAAC,KAAK,UAAU;AAErC,WAAK,MAAM,SAAS,CAAC,KAAK,UAAU;AAEpC,WAAK,MAAM,qBAAqB,CAAC,KAAK,UAAU;AAAA,IAChD;AAAA,IACD,mBAAmB;AAElB,UAAI,QAAQ;AAEZ,UAAI,CAAC,CAAC,KAAK,SAAS,KAAK,MAAM;AAC9B,gBAAQ,KAAK,IAAI,IAAI,OAAO,KAAK,IAAI,EAAE,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM;AAAA,MAC5D;AACA,aAAO;AAAA,IACP;AAAA,IACD,QAAQ,OAAO;AACd,WAAK,MAAM,QAAQ,KAAK;AACxB,UAAI,QAAQ,MAAM,OAAO;AACzB,UAAI,MAAM,KAAK,GAAG;AACjB,aAAK,aAAa,KAAK;AACvB;AAAA,MACD;AACA,cAAQ,CAAC;AACT,UAAI,QAAQ,KAAK,KAAK;AACrB,gBAAQ,KAAK;AAAA,iBACH,QAAQ,KAAK,KAAK;AAC5B,gBAAQ,KAAK;AAAA,MACd;AACA,YAAM,QAAQ,KAAK;AACnB,WAAK,aAAa,MAAM,QAAQ,OAAO,KAAK,EAAE,SAAS,CAAC;AACxD,WAAK,MAAM,UAAU,CAAC,KAAK,UAAU;AACrC,WAAK,MAAM,SAAS,CAAC,KAAK,UAAU;AACpC,WAAK,MAAM,qBAAqB,CAAC,KAAK,UAAU;AAAA,IAChD;AAAA,IACD,SAAS,OAAO;AACf,WAAK,MAAM,SAAS,KAAK;AAAA,IAC1B;AAAA,EACD;;;;;;;;;;;;;;;;;;;;;;ACxJF,GAAG,gBAAgB,SAAS;"}