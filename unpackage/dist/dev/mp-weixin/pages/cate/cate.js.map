{"version":3,"file":"cate.js","sources":["../../../../../../pages/cate/cate.vue","../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2F0ZS9jYXRlLnZ1ZQ"],"sourcesContent":["<template>\n\t<my-search @handle-click=\"gotoSearch\"></my-search>\n\t<view class=\"scroll-view-container\">\n\t\t<!-- 左侧滑动区域 -->\n\t\t<scroll-view class=\"left-scroll-view\" scroll-y=\"true\" :style=\"{ height: wh + 'px' }\">\n\t\t\t<block v-for=\"(item, i) in cateList\" :key=\"i\">\n\t\t\t\t<view @click=\"activeChange(i)\" :class=\"['left-scroll-view-item', i === active ? 'active' : '']\">{{ item.cat_name }}</view>\n\t\t\t</block>\n\t\t</scroll-view>\n\t\t<!-- 右侧滑动区域 -->\n\t\t<scroll-view :scroll-top=\"scrollTop\" scroll-y=\"true\" :style=\"{ height: wh + 'px' }\">\n\t\t\t<view class=\"cate-level2\" v-for=\"(item2, i2) in cateLevel2\" :key=\"i2\">\n\t\t\t\t<!-- 二级分类 -->\n\t\t\t\t<view class=\"cate-level2-title\">-{{ item2.cat_name }}-</view>\n\t\t\t\t<!-- 二级分类下的三级分类 -->\n\t\t\t\t<!-- 三级分类列表 -->\n\t\t\t\t<view class=\"cate-level3-list\">\n\t\t\t\t\t<!-- 三级分类的item项 -->\n\t\t\t\t\t<view class=\"cate-level3-item\" v-for=\"(item3, i3) in item2.children\" :key=\"i3\" @click=\"gotoGoodsList(item3)\">\n\t\t\t\t\t\t<image :src=\"item3.cat_icon.includes('api-hmugo-web.itheima.net') ? item3.cat_icon : `${BASE_URL}${item3.cat_icon}`\"></image>\n\t\t\t\t\t\t<text>{{ item3.cat_name }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</scroll-view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { onLoad, onShow } from '@dcloudio/uni-app';\nimport { setBarge } from '@/hook/useTabbarBadge.js';\nimport { ajaxGet, fetchGet } from '@/utils/api.js';\n\nconst BASE_URL = ref(process.env.VUE_APP_BASE_URL);\nconst cateList = ref([]);\nconst cateLevel2 = ref([]);\n\nconst getCateListData = async () => {\n\tconst { data: res } = await ajaxGet('/api/public/v1/cate/categories');\n\tconst { meta, message } = res;\n\tif (meta.status !== 200) uni.$showMessage();\n\tcateList.value = message;\n\tcateLevel2.value = message[0].children;\n};\n\nconst active = ref(0);\nconst scrollTop = ref(0);\nconst activeChange = i => {\n\tactive.value = i;\n\t// 更新二级分类数据\n\tcateLevel2.value = cateList.value[i].children;\n\t// 回到顶部\n\tscrollTop.value = scrollTop.value === 0 ? 1 : 0;\n};\n\nconst gotoGoodsList = ({ cat_id }) => {\n\tuni.navigateTo({\n\t\turl: '/subpkg/goods_list/goods_list?cid=' + cat_id\n\t});\n};\n\nconst gotoSearch = () => {\n\tuni.navigateTo({\n\t\turl: '/subpkg/search/search'\n\t});\n};\n\nconst wh = ref(0); //当前屏幕可使用高度\nonLoad(async () => {\n\tconst { windowHeight } = await uni.getSystemInfo();\n\twh.value = windowHeight - 50;\n\tgetCateListData();\n});\n\nonShow(() => {\n\tsetBarge();\n});\n</script>\n\n<style lang=\"scss\">\n.scroll-view-container {\n\tdisplay: flex;\n\t.left-scroll-view {\n\t\twidth: 120px;\n\t\t.left-scroll-view-item {\n\t\t\tbackground: #f7f7f7;\n\t\t\tfont-size: 12px;\n\t\t\tline-height: 60px;\n\t\t\ttext-align: center;\n\t\t\t&.active {\n\t\t\t\tbackground: #ffffff;\n\t\t\t\tposition: relative;\n\t\t\t\t&::before {\n\t\t\t\t\tcontent: ' ';\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\twidth: 3px;\n\t\t\t\t\theight: 30px;\n\t\t\t\t\tbackground: #f2ba4b;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\ttop: 50%;\n\t\t\t\t\ttransform: translateY(-50%);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.cate-level2-title {\n\t\ttext-align: center;\n\t\tfont-size: 12px;\n\t\tfont-weight: bold;\n\t\tpadding: 15px 0;\n\t}\n\t.cate-level3-list {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\t.cate-level3-item {\n\t\t\twidth: 33.33%;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tmargin-bottom: 10px;\n\t\t\timage {\n\t\t\t\twidth: 60px;\n\t\t\t\theight: 60px;\n\t\t\t}\n\t\t\ttext {\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import MiniProgramPage from '/Users/yangyongqian/code/uni-shop/pages/cate/cate.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","ajaxGet","uni","onLoad","onShow","setBarge"],"mappings":";;;;;;;;;;;;;;;;AAkCA,UAAM,WAAWA,cAAAA,IAAI,uBAA4B;AACjD,UAAM,WAAWA,cAAAA,IAAI,CAAA,CAAE;AACvB,UAAM,aAAaA,cAAAA,IAAI,CAAA,CAAE;AAEzB,UAAM,kBAAkB,YAAY;AACnC,YAAM,EAAE,MAAM,IAAG,IAAK,MAAMC,UAAO,QAAC,gCAAgC;AACpE,YAAM,EAAE,MAAM,QAAS,IAAG;AAC1B,UAAI,KAAK,WAAW;AAAKC,sBAAG,MAAC,aAAY;AACzC,eAAS,QAAQ;AACjB,iBAAW,QAAQ,QAAQ,CAAC,EAAE;AAAA,IAC/B;AAEA,UAAM,SAASF,cAAAA,IAAI,CAAC;AACpB,UAAM,YAAYA,cAAAA,IAAI,CAAC;AACvB,UAAM,eAAe,OAAK;AACzB,aAAO,QAAQ;AAEf,iBAAW,QAAQ,SAAS,MAAM,CAAC,EAAE;AAErC,gBAAU,QAAQ,UAAU,UAAU,IAAI,IAAI;AAAA,IAC/C;AAEA,UAAM,gBAAgB,CAAC,EAAE,aAAa;AACrCE,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,uCAAuC;AAAA,MAC9C,CAAE;AAAA,IACF;AAEA,UAAM,aAAa,MAAM;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACP,CAAE;AAAA,IACF;AAEA,UAAM,KAAKF,cAAAA,IAAI,CAAC;AAChBG,kBAAAA,OAAO,YAAY;AAClB,YAAM,EAAE,aAAc,IAAG,MAAMD,cAAG,MAAC,cAAa;AAChD,SAAG,QAAQ,eAAe;AAC1B;IACD,CAAC;AAEDE,kBAAAA,OAAO,MAAM;AACZC,0BAAAA;IACD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5ED,GAAG,WAAW,eAAe;"}