{"version":3,"file":"home.js","sources":["../../../../../../pages/home/home.vue","../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaG9tZS9ob21lLnZ1ZQ"],"sourcesContent":["<template>\n\t<view>\n\t\t<!-- 搜索区域 -->\n\t\t<view class=\"search-box\"><my-search @handle-click=\"gotoSearch\"></my-search></view>\n\n\t\t<!-- 轮播图区域 -->\n\t\t<swiper :indicator-dots=\"true\" :autoplay=\"true\" :interval=\"3000\" :duration=\"1000\" :circular=\"true\">\n\t\t\t<swiper-item v-for=\"(item, i) in swiperList\" :key=\"i\">\n\t\t\t\t<navigator class=\"swiper-item\" :url=\"`/subpkg/goods_detail/goods_detail?goods_id=${item.goods_id}`\">\n\t\t\t\t\t<img :src=\"`${BASE_URL}${item.image_src}`\" alt=\"轮播图片\" />\n\t\t\t\t</navigator>\n\t\t\t</swiper-item>\n\t\t</swiper>\n\n\t\t<!-- 分类导航区域 -->\n\t\t<view class=\"nav-list\">\n\t\t\t<view v-for=\"(item, i) in navList\" :key=\"i\" @click=\"navClickHander(item)\" class=\"nav-item\">\n\t\t\t\t<image class=\"nav-img\" :src=\"`${BASE_URL}${item.image_src}`\"></image>\n\t\t\t\t<text class=\"nav-text\">{{ item.name }}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 楼层区域 -->\n\t\t<view class=\"floor-list\">\n\t\t\t<view class=\"floor-item\" v-for=\"(item, i) in floorList\" :key=\"i\">\n\t\t\t\t<!-- 楼层标题 -->\n\t\t\t\t<view class=\"floor-title\">\n\t\t\t\t\t<image :src=\"`${BASE_URL}${item.floor_title.image_src}`\" class=\"floor-img\"></image>\n\t\t\t\t\t<text class=\"floor-text\">{{ item.floor_title.name }}</text>\n\t\t\t\t</view>\n\t\t\t\t<!-- 楼层图片区域 -->\n\t\t\t\t<view class=\"floor-img-box\">\n\t\t\t\t\t<!-- 左侧区域 -->\n\t\t\t\t\t<navigator :url=\"`${BASE_URL}${item.product_list[0].url}`\" class=\"left-img-box\">\n\t\t\t\t\t\t<image class=\"cover-bg\" :src=\"`${BASE_URL}${item.product_list[0].image_src}`\" mode=\"widthFix\" :style=\"{ width: item.product_list[0].image_width + 'rpx' }\">\n\t\t\t\t\t\t\t<text class=\"cover-text\">{{ item.product_list[0].name }}</text>\n\t\t\t\t\t\t</image>\n\t\t\t\t\t</navigator>\n\t\t\t\t\t<!-- 右侧区域 -->\n\t\t\t\t\t<view class=\"right-img-box\">\n\t\t\t\t\t\t<template v-for=\"(item2, index) in item.product_list\" :key=\"index\">\n\t\t\t\t\t\t\t<navigator :url=\"item2.url\" class=\"right-item\" v-if=\"index !== 0\">\n\t\t\t\t\t\t\t\t<image class=\"cover-bg\" :style=\"{ width: item2.image_width + 'rpx' }\" :src=\"`${BASE_URL}${item2.image_src}`\" mode=\"widthFix\">\n\t\t\t\t\t\t\t\t\t<text class=\"cover-text\">{{ item2.name }}</text>\n\t\t\t\t\t\t\t\t</image>\n\t\t\t\t\t\t\t</navigator>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { onLoad, onShow } from '@dcloudio/uni-app';\nimport { setBarge } from '@/hook/useTabbarBadge.js';\nimport { ajaxGet } from '@/utils/api.js';\nimport { BASE_URL } from '@/utils/config.js';\n\nconst swiperList = ref([]);\nconst navList = ref([]);\nconst floorList = ref([]);\n\nconst getSwiperData = async () => {\n\tconst { data: res } = await ajaxGet('/api/public/v1/home/swiperdata');\n\tconst { meta, message } = res;\n\t// 请求失败\n\tif (meta.status !== 200) {\n\t\treturn uni.$showMessage();\n\t}\n\tswiperList.value = message;\n};\n\nconst getNavListData = async () => {\n\tconst { data: res } = await ajaxGet('/api/public/v1/home/catitems');\n\tconst { meta, message } = res;\n\tif (meta.status !== 200) uni.$showMessage();\n\tnavList.value = message;\n};\n\nconst navClickHander = item => {\n\tif (item.name === '分类') {\n\t\tuni.switchTab({\n\t\t\turl: '/pages/cate/cate'\n\t\t});\n\t}\n};\n\nconst getFloorListData = async () => {\n\tconst { data: res } = await ajaxGet('/api/public/v1/home/floorData');\n\tconst { meta, message } = res;\n\tif (meta.status !== 200) return uni.$showMessage();\n\t//对数据进行处理\n\tmessage.forEach(floor => {\n\t\tfloor.product_list.forEach(prod => {\n\t\t\tprod.url = `/subpkg/goods_list/goods_list?${prod.navigator_url.split('?')[1]}`;\n\t\t});\n\t});\n\tfloorList.value = message;\n};\n\nconst gotoSearch = () => {\n\tuni.navigateTo({\n\t\turl: '/subpkg/search/search'\n\t});\n};\n\nonShow(() => {\n\tsetBarge();\n});\n\nonLoad(() => {\n\tgetSwiperData();\n\tgetNavListData();\n\tgetFloorListData();\n});\n</script>\n<style lang=\"scss\">\nswiper {\n\theight: 330rpx;\n\t.swiper-item,\n\timage {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n}\n\n.nav-list {\n}\n.nav-list {\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tmargin: 15rpx 0;\n\t.nav-item {\n\t\twidth: 128rpx;\n\t\theight: 140rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\t.nav-img {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n}\n\n.floor-list {\n\tpadding: 10px;\n\t.floor-item {\n\t\tmargin-bottom: 10px;\n\t\t.cover-bg {\n\t\t\tposition: relative;\n\t\t\tborder-radius: 10rpx;\n\t\t\t.cover-text {\n\t\t\t\twidth: 100%;\n\t\t\t\tposition: absolute;\n\t\t\t\tcolor: #fff;\n\t\t\t\tfont-size: 20px;\n\t\t\t\ttop: 50%;\n\t\t\t\ttext-align: center;\n\t\t\t\tfont-weight: bold;\n\t\t\t\ttransform: translateY(-50%);\n\t\t\t}\n\t\t}\n\t\t.floor-title {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tmargin-bottom: 10px;\n\t\t\t.floor-text {\n\t\t\t\tmargin-left: 10px;\n\t\t\t\tfont-size: 18px;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t\t.floor-img {\n\t\t\t\twidth: 40rpx;\n\t\t\t\theight: 40rpx;\n\t\t\t}\n\t\t}\n\t\t.floor-img-box {\n\t\t\tdisplay: flex;\n\t\t\t.left-img-box {\n\t\t\t\tfont-size: 0;\n\t\t\t}\n\t\t\t.right-img-box {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\tjustify-content: space-around;\n\t\t\t\t.right-item {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t.cover-bg {\n\t\t\t\t\t\t.cover-text {\n\t\t\t\t\t\t\tfont-size: 20rpx;\n\t\t\t\t\t\t\tcolor: #000;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n.search-box {\n\tposition: sticky;\n\ttop: 0;\n\tz-index: 999;\n}\n</style>\n","import MiniProgramPage from '/Users/yangyongqian/code/uni-shop/pages/home/home.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","ajaxGet","uni","onShow","setBarge","onLoad"],"mappings":";;;;;;;;;;;;;;;;;AA6DA,UAAM,aAAaA,cAAAA,IAAI,CAAA,CAAE;AACzB,UAAM,UAAUA,cAAAA,IAAI,CAAA,CAAE;AACtB,UAAM,YAAYA,cAAAA,IAAI,CAAA,CAAE;AAExB,UAAM,gBAAgB,YAAY;AACjC,YAAM,EAAE,MAAM,IAAG,IAAK,MAAMC,UAAO,QAAC,gCAAgC;AACpE,YAAM,EAAE,MAAM,QAAS,IAAG;AAE1B,UAAI,KAAK,WAAW,KAAK;AACxB,eAAOC,cAAAA,MAAI;MACX;AACD,iBAAW,QAAQ;AAAA,IACpB;AAEA,UAAM,iBAAiB,YAAY;AAClC,YAAM,EAAE,MAAM,IAAG,IAAK,MAAMD,UAAO,QAAC,8BAA8B;AAClE,YAAM,EAAE,MAAM,QAAS,IAAG;AAC1B,UAAI,KAAK,WAAW;AAAKC,sBAAG,MAAC,aAAY;AACzC,cAAQ,QAAQ;AAAA,IACjB;AAEA,UAAM,iBAAiB,UAAQ;AAC9B,UAAI,KAAK,SAAS,MAAM;AACvBA,sBAAAA,MAAI,UAAU;AAAA,UACb,KAAK;AAAA,QACR,CAAG;AAAA,MACD;AAAA,IACF;AAEA,UAAM,mBAAmB,YAAY;AACpC,YAAM,EAAE,MAAM,IAAG,IAAK,MAAMD,UAAO,QAAC,+BAA+B;AACnE,YAAM,EAAE,MAAM,QAAS,IAAG;AAC1B,UAAI,KAAK,WAAW;AAAK,eAAOC,cAAG,MAAC,aAAY;AAEhD,cAAQ,QAAQ,WAAS;AACxB,cAAM,aAAa,QAAQ,UAAQ;AAClC,eAAK,MAAM,iCAAiC,KAAK,cAAc,MAAM,GAAG,EAAE,CAAC;AAAA,QAC9E,CAAG;AAAA,MACH,CAAE;AACD,gBAAU,QAAQ;AAAA,IACnB;AAEA,UAAM,aAAa,MAAM;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACP,CAAE;AAAA,IACF;AAEAC,kBAAAA,OAAO,MAAM;AACZC,0BAAAA;IACD,CAAC;AAEDC,kBAAAA,OAAO,MAAM;AACZ;AACA;AACA;IACD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpHD,GAAG,WAAW,eAAe;"}