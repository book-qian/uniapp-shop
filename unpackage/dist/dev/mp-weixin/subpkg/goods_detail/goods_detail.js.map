{"version":3,"file":"goods_detail.js","sources":["../../../../../../subpkg/goods_detail/goods_detail.vue","../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3VicGtnL2dvb2RzX2RldGFpbC9nb29kc19kZXRhaWwudnVl"],"sourcesContent":["<template>\n\t<view v-if=\"goodsDetail.goodsInfo?.goods_name\" class=\"goods-detail-container\">\n\t\t<!-- 轮播图区域 -->\n\t\t<swiper :indicator-dots=\"true\" :autoplay=\"true\" :interval=\"3000\" :duration=\"1000\" :circular=\"true\">\n\t\t\t<swiper-item v-for=\"(item, i) in goodsDetail.goodsInfo?.pics\" :key=\"i\" @click=\"preview(i)\"><image :src=\"`${BASE_URL}${item.pics_big}`\"></image></swiper-item>\n\t\t</swiper>\n\t\t<!-- 商品信息区域 -->\n\t\t<view class=\"goods-info-box\">\n\t\t\t<!-- 商品价格 -->\n\t\t\t<view class=\"goods-price\">\n\t\t\t\t<uni-icons type=\"fire\" size=\"17\" color=\"#f2ba4b\"></uni-icons>\n\t\t\t\t{{ goodsDetail.goodsInfo?.goods_number }}\n\t\t\t</view>\n\t\t\t<!-- 商品信息主体区域 -->\n\t\t\t<view class=\"goods-info-body\">\n\t\t\t\t<!-- 商品名称 -->\n\t\t\t\t<view class=\"goods-name\">{{ goodsDetail.goodsInfo?.goods_name }}</view>\n\t\t\t\t<!-- 收藏 -->\n\t\t\t\t<view class=\"goods-favr\">\n\t\t\t\t\t<uni-icons type=\"star\" size=\"18\" color=\"gray\"></uni-icons>\n\t\t\t\t\t<text>收藏</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 商品介绍 -->\n\t\t<!-- <rich-text :nodes=\"goodsDetail.goodsInfo?.goods_introduce\"></rich-text> -->\n\t\t<view class=\"memorandum_detail\" v-for=\"(item, index) in memorandum_detail\" :key=\"index\">\n\t\t\t<text class=\"memorandum-text\">{{ item.name }}</text>\n\t\t\t<image :src=\"`${BASE_URL}${item.url}`\"></image>\n\t\t</view>\n\t\t<!-- 商品导航区域 -->\n\t\t<view class=\"goods-nav\">\n\t\t\t<uni-goods-nav :fill=\"true\" :options=\"goodsDetail.options\" :buttonGroup=\"goodsDetail.buttonGroup\" @click=\"onClick\" @buttonClick=\"buttonClick\" />\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, computed, reactive, watch } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport { useStore } from 'vuex';\nimport { ajaxGet } from '@/utils/api.js';\nconst store = useStore();\nconst goodsDetail = reactive({\n\tgoodsInfo: {},\n\toptions: [\n\t\t{\n\t\t\ticon: 'fire',\n\t\t\ttext: '热度'\n\t\t},\n\t\t{\n\t\t\ticon: 'wallet',\n\t\t\ttext: '备忘录',\n\t\t\tinfo: 0\n\t\t}\n\t],\n\tbuttonGroup: [\n\t\t{\n\t\t\ttext: '加入备忘录',\n\t\t\tbackgroundColor: '#ff0000',\n\t\t\tcolor: '#fff'\n\t\t},\n\t\t{\n\t\t\ttext: '作为模板',\n\t\t\tbackgroundColor: '#ffa200',\n\t\t\tcolor: '#fff'\n\t\t}\n\t]\n});\n\nconst total = computed(() => store.getters['m_cart/total']);\nwatch(\n\t() => total.value,\n\tnewVal => {\n\t\tconst findResult = goodsDetail.options.find(t => t.text === '购物车');\n\t\tif (findResult) {\n\t\t\tfindResult.info = newVal;\n\t\t}\n\t},\n\t{ immediate: true }\n);\n// 左侧导航点击\nconst onClick = e => {\n\tif (e.content.text === '备忘录') {\n\t\tuni.switchTab({\n\t\t\turl: '/pages/cart/cart'\n\t\t});\n\t}\n};\n\n// 右侧点击\nconst buttonClick = e => {\n\tif (e.content.text === '加入备忘录') {\n\t\t// 组织商品对象 goods_id goods_name goods_price goods_count goods_small_logo goods_state\n\t\tconst { goods_id, goods_name, goods_price, goods_small_logo } = goodsDetail.goodsInfo;\n\t\tlet goods = {\n\t\t\tgoods_id,\n\t\t\tgoods_name,\n\t\t\tgoods_price,\n\t\t\tgoods_small_logo,\n\t\t\tgoods_count: 1,\n\t\t\tgoods_state: true\n\t\t};\n\t\t// 添加购物车\n\t\tstore.commit('m_cart/addToCart', goods);\n\t}\n};\n\n// 获取备忘录详情\nconst memorandum_detail = ref([]);\nconst getGoodsInfo = async goods_id => {\n\tconst { data: res } = await ajaxGet('/api/public/v1/goods/detail', { goods_id });\n\tconst { meta, message } = res;\n\tif (meta.status !== 200) return uni.$showMessage();\n\tmemorandum_detail.value = message.memorandum_detail;\n\n\tgoodsDetail.goodsInfo = message;\n};\n\nonLoad(({ goods_id }) => {\n\tgetGoodsInfo(goods_id);\n});\n\nconst BASE_URL = ref(process.env.VUE_APP_BASE_URL);\nconst preview = i => {\n\tlet urls = goodsDetail.goodsInfo.pics\n\t\t.map(t => {\n\t\t\treturn {\n\t\t\t\tpics_big: `${BASE_URL.value}${t.pics_big}`\n\t\t\t};\n\t\t})\n\t\t.map(t => t.pics_big);\n\n\tuni.previewImage({\n\t\turls,\n\t\tcurrent: i\n\t});\n};\n</script>\n\n<style lang=\"scss\">\nswiper {\n\theight: 750rpx;\n\timage {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n}\n.goods-info-box {\n\tpadding: 10px;\n\tpadding-right: 0;\n\t.goods-price {\n\t\tcolor: #f2ba4b;\n\t\tfont-size: 18px;\n\t\tmargin: 10px 0;\n\t}\n\t.goods-info-body {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\t.goods-name {\n\t\t\tfont-size: 13px;\n\t\t\tmargin-right: 10px;\n\t\t}\n\t\t.goods-favr {\n\t\t\twidth: 120px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tfont-size: 12px;\n\t\t\tcolor: gray;\n\t\t\tborder-left: 1px solid #efefef;\n\t\t}\n\t}\n\t.yf {\n\t\tcolor: gray;\n\t\tfont-size: 12px;\n\t\tmargin: 10px 0;\n\t}\n}\n.goods-nav {\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\twidth: 100%;\n}\n.goods-detail-container {\n\tpadding-bottom: 50px;\n}\n.memorandum_detail {\n\tpadding: 10px;\n\t.memorandum-text {\n\t\ttext-align: left;\n\t\tfont-size: 17px;\n\t}\n\n\timage {\n\t\tmargin-top: 60rpx;\n\t}\n}\n</style>\n","import MiniProgramPage from '/Users/yangyongqian/code/uni-shop/subpkg/goods_detail/goods_detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["useStore","reactive","computed","watch","uni","ref","ajaxGet","onLoad"],"mappings":";;;;;;;;;;;;;;;;;AA0CA,UAAM,QAAQA,cAAQ,SAAA;AACtB,UAAM,cAAcC,cAAAA,SAAS;AAAA,MAC5B,WAAW,CAAE;AAAA,MACb,SAAS;AAAA,QACR;AAAA,UACC,MAAM;AAAA,UACN,MAAM;AAAA,QACN;AAAA,QACD;AAAA,UACC,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,QACN;AAAA,MACD;AAAA,MACD,aAAa;AAAA,QACZ;AAAA,UACC,MAAM;AAAA,UACN,iBAAiB;AAAA,UACjB,OAAO;AAAA,QACP;AAAA,QACD;AAAA,UACC,MAAM;AAAA,UACN,iBAAiB;AAAA,UACjB,OAAO;AAAA,QACP;AAAA,MACD;AAAA,IACF,CAAC;AAED,UAAM,QAAQC,cAAQ,SAAC,MAAM,MAAM,QAAQ,cAAc,CAAC;AAC1DC,kBAAK;AAAA,MACJ,MAAM,MAAM;AAAA,MACZ,YAAU;AACT,cAAM,aAAa,YAAY,QAAQ,KAAK,OAAK,EAAE,SAAS,KAAK;AACjE,YAAI,YAAY;AACf,qBAAW,OAAO;AAAA,QAClB;AAAA,MACD;AAAA,MACD,EAAE,WAAW,KAAM;AAAA,IACpB;AAEA,UAAM,UAAU,OAAK;AACpB,UAAI,EAAE,QAAQ,SAAS,OAAO;AAC7BC,sBAAAA,MAAI,UAAU;AAAA,UACb,KAAK;AAAA,QACR,CAAG;AAAA,MACD;AAAA,IACF;AAGA,UAAM,cAAc,OAAK;AACxB,UAAI,EAAE,QAAQ,SAAS,SAAS;AAE/B,cAAM,EAAE,UAAU,YAAY,aAAa,iBAAkB,IAAG,YAAY;AAC5E,YAAI,QAAQ;AAAA,UACX;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA,aAAa;AAAA,UACb,aAAa;AAAA,QAChB;AAEE,cAAM,OAAO,oBAAoB,KAAK;AAAA,MACtC;AAAA,IACF;AAGA,UAAM,oBAAoBC,cAAAA,IAAI,CAAA,CAAE;AAChC,UAAM,eAAe,OAAM,aAAY;AACtC,YAAM,EAAE,MAAM,QAAQ,MAAMC,UAAO,QAAC,+BAA+B,EAAE,SAAQ,CAAE;AAC/E,YAAM,EAAE,MAAM,QAAS,IAAG;AAC1B,UAAI,KAAK,WAAW;AAAK,eAAOF,cAAG,MAAC,aAAY;AAChD,wBAAkB,QAAQ,QAAQ;AAElC,kBAAY,YAAY;AAAA,IACzB;AAEAG,kBAAAA,OAAO,CAAC,EAAE,eAAe;AACxB,mBAAa,QAAQ;AAAA,IACtB,CAAC;AAED,UAAM,WAAWF,cAAAA,IAAI,uBAA4B;AACjD,UAAM,UAAU,OAAK;AACpB,UAAI,OAAO,YAAY,UAAU,KAC/B,IAAI,OAAK;AACT,eAAO;AAAA,UACN,UAAU,GAAG,SAAS,QAAQ,EAAE;AAAA,QACpC;AAAA,MACA,CAAG,EACA,IAAI,OAAK,EAAE,QAAQ;AAErBD,oBAAAA,MAAI,aAAa;AAAA,QAChB;AAAA,QACA,SAAS;AAAA,MACX,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxIA,GAAG,WAAW,eAAe;"}